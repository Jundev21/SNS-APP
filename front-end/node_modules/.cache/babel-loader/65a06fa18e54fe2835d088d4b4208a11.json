{"ast":null,"code":"var _jsxFileName = \"/Users/jun/Desktop/Front-Git/bunjang/src/components/headerComponents/SearchBar.tsx\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useAppDispatch } from \"../../hooks\";\nimport { setSearchWordTK, setOrderCommandTK } from \"../../redux/dataSlice\";\nimport RenderAutoCom from \"../searchBarComponents/RenderAutoCom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SearchBar() {\n  _s();\n\n  const [searchWord, setSearchWord] = useState(\"\");\n  const [autoComplete, setAutoComplete] = useState([]);\n  const [searchList, setSearchList] = useState(false);\n  const textInput = useRef(null);\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    const autoData = async () => {\n      const liveWord = await axios.get(`https://api.stg-bunjang.co.kr/api/1/search/suggests_keyword.json?q=${searchWord}&type=product&v=2`);\n      setAutoComplete(liveWord.data.keywords);\n    };\n\n    autoData();\n  }, [searchWord]);\n\n  const handleChange = e => {\n    setSearchWord(e.target.value);\n  };\n\n  const handleInput = () => {\n    setSearchList(true);\n  };\n\n  const handleSubmit = e => {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (searchWord !== \"\") {\n      let getSessionData = sessionStorage.getItem(\"SearchHistory\");\n\n      if (!getSessionData) {\n        sessionStorage.setItem(\"SearchHistory\", JSON.stringify([searchWord]));\n      } else {\n        let historyArr = JSON.parse(getSessionData);\n\n        if (historyArr.length > 6) {\n          historyArr.pop();\n        }\n\n        historyArr.unshift(searchWord);\n        let newData = new Set(historyArr);\n        let makeArr = [...newData];\n        sessionStorage.setItem(\"SearchHistory\", JSON.stringify(makeArr));\n      }\n\n      setSearchList(false);\n      dispatch(setOrderCommandTK(\"date\"));\n      dispatch(setSearchWordTK(searchWord));\n    }\n  };\n\n  const handleClear = () => {\n    if (textInput.current !== null) {\n      textInput.current.focus();\n    }\n\n    setSearchList(true);\n    setSearchWord(\"\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(SearchContainer, {\n    children: /*#__PURE__*/_jsxDEV(SearchWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(FormInput, {\n          ref: textInput,\n          type: \"text\",\n          onChange: handleChange,\n          placeholder: \"\\uC0C1\\uD488\\uBA85\",\n          value: searchWord,\n          onClick: handleInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), searchList === true && /*#__PURE__*/_jsxDEV(RenderAutoCom, {\n          searchWord: searchWord,\n          autoComplete: autoComplete,\n          setSearchWord: setSearchWord,\n          setSearchList: setSearchList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), searchWord !== \"\" && /*#__PURE__*/_jsxDEV(ClearInput, {\n        onClick: () => handleClear(),\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Img, {\n        src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB QAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAeZJREFUOBGVVD1PAkEQ3VlOjY0xIdGOI0BMxMSGytJE+RsWWomx8mfYWNBpZWltg1b2NCZaGBppFAzR1njsOO9gzHEfIJdws/vmvcft7OySiT2DQqUakDtipjoZ4xsyzGy6RNzy2F7mu53nmGRiKprRw7XaQm/wdU6OG2xMTvFoFPKQLTXX86tn1G7/RHM6thjArP/xeWscn8rUWqJLee/klhdW8MM4xCQHDrjQqEkivhfLF++FEvf80luvsLGXIIwB5MABF5o0HoU1M+5RkvK1Xn29+3KfRlQMpmyCOyzfM3Y7XlMbboDUjIiuZpnBFBwsH3WGVv9Io8VuYuLEUMFZUbmqjfJt2BqC5JZyT9HEtLFyVRvlhrscBeYaS4/G+VaQV4DD7+FWPJk1Vy4aPs6R+nILoBTzMJ7MmitXtVGexXFCC8j5OpzWgyoCxzEfQQOt4hot+gjHSZZOhoLraabIEQU3EEMT70HgHl44m3KcNqUm+2SCVt8vX6E1dDdRMyzTcSCXBhRSImc6o9HkW7589Pz3cpAD8CBL3oXKkj1Ze+00xxZh+DNUMHF9SQKdEL2+en7lmNmFRmmm6jVXhGl4SchF0fcrjbnEWeQ008SSs8RZuC5fjIbWW6xm8ebCYdovlg8g+gXwsu0wmCVGbgAAAABJRU5ErkJggg==\",\n        alt: \"\\uAC80\\uC0C9 \\uBC84\\uD2BC \\uC544\\uC774\\uCF58\",\n        onClick: () => handleSubmit(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchBar, \"WYcKCthGEMQCjemjD4rY0JfUxPk=\", false, function () {\n  return [useAppDispatch];\n});\n\n_c = SearchBar;\nexport default SearchBar;\nconst SearchContainer = styled.div`\n  position: relative;\n  width: 460px;\n  border: 2px solid red;\n`;\n_c2 = SearchContainer;\nconst SearchWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 15px;\n\n  > form {\n    flex: 1;\n  }\n\n  > img {\n  }\n`;\n_c3 = SearchWrapper;\nconst SearchForm = styled.form``;\n_c4 = SearchForm;\nconst FormInput = styled.input`\n  width: 100%;\n  height: 36px;\n  border: none;\n  outline: none;\n  color: black;\n`;\n_c5 = FormInput;\nconst ClearInput = styled.div`\n  padding: 0 10px;\n  color: rgb(194, 194, 194);\n  cursor: pointer;\n`;\n_c6 = ClearInput;\nconst Img = styled.img`\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n`;\n_c7 = Img;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"SearchBar\");\n$RefreshReg$(_c2, \"SearchContainer\");\n$RefreshReg$(_c3, \"SearchWrapper\");\n$RefreshReg$(_c4, \"SearchForm\");\n$RefreshReg$(_c5, \"FormInput\");\n$RefreshReg$(_c6, \"ClearInput\");\n$RefreshReg$(_c7, \"Img\");","map":{"version":3,"sources":["/Users/jun/Desktop/Front-Git/bunjang/src/components/headerComponents/SearchBar.tsx"],"names":["styled","React","useState","useEffect","useRef","axios","useAppDispatch","setSearchWordTK","setOrderCommandTK","RenderAutoCom","SearchBar","searchWord","setSearchWord","autoComplete","setAutoComplete","searchList","setSearchList","textInput","dispatch","autoData","liveWord","get","data","keywords","handleChange","e","target","value","handleInput","handleSubmit","preventDefault","getSessionData","sessionStorage","getItem","setItem","JSON","stringify","historyArr","parse","length","pop","unshift","newData","Set","makeArr","handleClear","current","focus","SearchContainer","div","SearchWrapper","SearchForm","form","FormInput","input","ClearInput","Img","img"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useAppDispatch } from \"../../hooks\";\nimport { setSearchWordTK, setOrderCommandTK } from \"../../redux/dataSlice\";\nimport RenderAutoCom from \"../searchBarComponents/RenderAutoCom\";\n\nfunction SearchBar() {\n  const [searchWord, setSearchWord] = useState(\"\");\n  const [autoComplete, setAutoComplete] = useState([]);\n  const [searchList, setSearchList] = useState(false);\n  const textInput = useRef<HTMLInputElement>(null);\n\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    const autoData = async () => {\n      const liveWord = await axios.get(\n        `https://api.stg-bunjang.co.kr/api/1/search/suggests_keyword.json?q=${searchWord}&type=product&v=2`\n      );\n      setAutoComplete(liveWord.data.keywords);\n    };\n    autoData();\n  }, [searchWord]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchWord(e.target.value);\n  };\n\n  const handleInput = () => {\n    setSearchList(true);\n  };\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement> | null) => {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (searchWord !== \"\") {\n      let getSessionData = sessionStorage.getItem(\"SearchHistory\");\n\n      if (!getSessionData) {\n        sessionStorage.setItem(\"SearchHistory\", JSON.stringify([searchWord]));\n      } else {\n        let historyArr: Array<string> = JSON.parse(getSessionData);\n\n        if (historyArr.length > 6) {\n          historyArr.pop();\n        }\n        historyArr.unshift(searchWord);\n        let newData = new Set(historyArr);\n        let makeArr = [...newData];\n        sessionStorage.setItem(\"SearchHistory\", JSON.stringify(makeArr));\n      }\n\n      setSearchList(false);\n      dispatch(setOrderCommandTK(\"date\"));\n      dispatch(setSearchWordTK(searchWord));\n    }\n  };\n\n  const handleClear = () => {\n    if (textInput.current !== null) {\n      textInput.current.focus();\n    }\n    setSearchList(true);\n    setSearchWord(\"\");\n  };\n\n  return (\n    <SearchContainer>\n      <SearchWrapper>\n        <SearchForm onSubmit={handleSubmit}>\n          <FormInput\n            ref={textInput}\n            type=\"text\"\n            onChange={handleChange}\n            placeholder=\"상품명\"\n            value={searchWord}\n            onClick={handleInput}\n          />\n\n          {searchList === true && (\n            <RenderAutoCom\n              searchWord={searchWord}\n              autoComplete={autoComplete}\n              setSearchWord={setSearchWord}\n              setSearchList={setSearchList}\n            />\n          )}\n        </SearchForm>\n        {searchWord !== \"\" && (\n          <ClearInput onClick={() => handleClear()}>X</ClearInput>\n        )}\n        <Img\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB\n          QAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAeZJREFUOBGVVD1PAkEQ3VlOjY0xIdGOI0BMxMSGytJE+RsWWomx8mfYWNBpZWltg1b2NCZaGBppFAzR1njsOO9gzHEfIJdws/vmvcft7OySiT2DQqUakDtipjoZ4xsyzGy6RNzy2F7mu53nmGRiKprRw7XaQm/wdU6OG2xMTvFoFPKQLTXX86tn1G7/RHM6thjArP/xeWscn8rUWqJLee/klhdW8MM4xCQHDrjQqEkivhfLF++FEvf80luvsLGXIIwB5MABF5o0HoU1M+5RkvK1Xn29+3KfRlQMpmyCOyzfM3Y7XlMbboDUjIiuZpnBFBwsH3WGVv9Io8VuYuLEUMFZUbmqjfJt2BqC5JZyT9HEtLFyVRvlhrscBeYaS4/G+VaQV4DD7+FWPJk1Vy4aPs6R+nILoBTzMJ7MmitXtVGexXFCC8j5OpzWgyoCxzEfQQOt4hot+gjHSZZOhoLraabIEQU3EEMT70HgHl44m3KcNqUm+2SCVt8vX6E1dDdRMyzTcSCXBhRSImc6o9HkW7589Pz3cpAD8CBL3oXKkj1Ze+00xxZh+DNUMHF9SQKdEL2+en7lmNmFRmmm6jVXhGl4SchF0fcrjbnEWeQ008SSs8RZuC5fjIbWW6xm8ebCYdovlg8g+gXwsu0wmCVGbgAAAABJRU5ErkJggg==\"\n          alt=\"검색 버튼 아이콘\"\n          onClick={() => handleSubmit(null)}\n        ></Img>\n      </SearchWrapper>\n    </SearchContainer>\n  );\n}\n\nexport default SearchBar;\n\nconst SearchContainer = styled.div`\n  position: relative;\n  width: 460px;\n  border: 2px solid red;\n`;\n\nconst SearchWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 15px;\n\n  > form {\n    flex: 1;\n  }\n\n  > img {\n  }\n`;\n\nconst SearchForm = styled.form``;\n\nconst FormInput = styled.input`\n  width: 100%;\n  height: 36px;\n  border: none;\n  outline: none;\n  color: black;\n`;\n\nconst ClearInput = styled.div`\n  padding: 0 10px;\n  color: rgb(194, 194, 194);\n  cursor: pointer;\n`;\n\nconst Img = styled.img`\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n`;\n"]},"metadata":{},"sourceType":"module"}