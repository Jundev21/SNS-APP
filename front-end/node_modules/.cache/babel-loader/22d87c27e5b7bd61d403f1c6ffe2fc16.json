{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/jun/Desktop/Back-Git/\\u1100\\u1162\\u110B\\u1175\\u11AB \\u1111\\u1173\\u1105\\u1169\\u110C\\u1166\\u11A8\\u1110\\u1173/SNS-APP/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/Users/jun/Desktop/Back-Git/\\u1100\\u1162\\u110B\\u1175\\u11AB \\u1111\\u1173\\u1105\\u1169\\u110C\\u1166\\u11A8\\u1110\\u1173/SNS-APP/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17;import styled from\"styled-components\";import Comment from\"../comment/Comment\";import axios from\"axios\";import dayjs from\"dayjs\";import{useState,useEffect}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MyDetailFeedBody(){var _useLocation=useLocation(),state=_useLocation.state;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(state.title),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(state.basicUserInfoResponse.userName),_useState6=_slicedToArray(_useState5,2),writer=_useState6[0],setWriter=_useState6[1];var _useState7=useState(state.contents),_useState8=_slicedToArray(_useState7,2),body=_useState8[0],setBody=_useState8[1];var _useState9=useState(dayjs(state.createdTime).format(\"YYYY-MM-DD HH:mm\")),_useState10=_slicedToArray(_useState9,2),date=_useState10[0],setDate=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),commentDate=_useState12[0],setCommentDate=_useState12[1];var _useState13=useState(state.id),_useState14=_slicedToArray(_useState13,2),id=_useState14[0],setId=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),likes=_useState16[0],setLikes=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),comments=_useState18[0],setComments=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),totalPage=_useState20[0],setTotalPage=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),comment=_useState22[0],setComment=_useState22[1];var navigate=useNavigate();var handleLikePost=function handleLikePost(event){console.log(localStorage.getItem(\"token\"));axios({url:\"/api/v1/favorite/board/\"+id,method:\"POST\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}}).then(function(res){console.log(\"success\");handleLikeCounts();}).catch(function(error){console.log(error);});};var handleLikeCounts=function handleLikeCounts(event){console.log(localStorage.getItem(\"token\"));axios({url:\"/api/v1/favorite/board/\"+id,method:\"GET\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}}).then(function(res){console.log(\"success favorite\");setLikes(res.data.responseBody.favoriteNumber);}).catch(function(error){console.log(error);});};var changePage=function changePage(pageNum){console.log(\"change pages\");console.log(pageNum);console.log(page);setPage(pageNum);handleGetComments(pageNum);};var handleGetComments=function handleGetComments(pageNum,event){console.log(\"handleGetComments\");axios({// url: '/api/v1/board/' + id + '/comments?size=5&sort=id&page=' + pageNum,\nurl:\"/api/v1/user/board/\"+id+\"/comment\",method:\"GET\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}}).then(function(res){console.log(\"success comment\");console.log(res);setComments(res.data.responseBody);setCommentDate(res.data.createdTime);setTotalPage(res.data.boardGetResponse.totalPages);}).catch(function(error){console.log(error);});};var handleWriteComment=function handleWriteComment(pageNum,event){console.log(\"handleWriteComment\");axios({url:\"/api/v1/user/board/\"+id+\"/comment\",method:\"POST\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")},data:{content:comment}}).then(function(res){console.log(\"success\");handleGetComments();setComment(\"\");}).catch(function(error){console.log(error);});};var handleModify=function handleModify(){console.log(\"handleModify\");console.log(state);navigate(\"/edit/my/feed\",{state:state});};var handleDelete=function handleDelete(id){console.log(\"handleDelete \"+id);axios({url:\"/api/v1/board/\"+id,method:\"DELETE\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}}).then(function(res){console.log(\"success\");console.log(res);console.log(page);navigate(\"/my/feed\");}).catch(function(error){console.log(error);});};useEffect(function(){handleGetComments();handleLikeCounts();},[]);return/*#__PURE__*/_jsx(BodyContainer,{children:/*#__PURE__*/_jsxs(BodyWrapper,{children:[/*#__PURE__*/_jsxs(MainContent,{children:[/*#__PURE__*/_jsx(MainSubTitle,{children:\"\\uB098\\uC758 \\uAC8C\\uC2DC\\uAE00 \\uBCF4\\uAE30\"}),/*#__PURE__*/_jsxs(TitleContainer,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",title]}),/*#__PURE__*/_jsxs(SubtitleContainer,{children:[/*#__PURE__*/_jsxs(SubTitle,{children:[\" \",writer]}),/*#__PURE__*/_jsx(SubTitle,{children:date})]})]}),/*#__PURE__*/_jsx(ContentContainer,{children:body}),/*#__PURE__*/_jsx(LikesBtn,{onClick:handleLikePost,children:/*#__PURE__*/_jsx(\"p\",{className:\"bi bi-hand-thumbs-up fs-6\",children:/*#__PURE__*/_jsx(LikeNumber,{children:likes})})})]}),/*#__PURE__*/_jsxs(EditBtn,{children:[/*#__PURE__*/_jsx(Edit,{type:\"button\",className:\"btn btn-primary px-3  btn-sm me-md-2\",onClick:handleModify,children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(Delete,{type:\"button\",className:\"btn btn-outline-danger btn-sm px-3\",onClick:function onClick(){return handleDelete(id);},children:\"\\uC0AD\\uC81C\"})]}),/*#__PURE__*/_jsxs(CommentContainer,{children:[/*#__PURE__*/_jsx(MainSubTitle,{children:\"\\uB313\\uAE00\"}),comments.map(function(comment){return/*#__PURE__*/_jsxs(CommentsData,{children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-person-circle\"})}),/*#__PURE__*/_jsxs(CommentUser,{children:[\" \",comment.userInfo.userName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",comment.commentInfo.content]}),/*#__PURE__*/_jsx(CommentDate,{children:dayjs(comment.commentInfo.updateDate).format(\"YYYY.MM.DD HH:mm\")})]});}),/*#__PURE__*/_jsx(CommentContainer,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-group  mb-2 row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group col\",children:/*#__PURE__*/_jsx(\"textarea\",{value:comment,className:\"form-control\",id:\"inputPassword2\",placeholder:\"\\uB313\\uAE00 \\uCD94\\uAC00\",onChange:function onChange(v){return setComment(v.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary col-1\",onClick:handleWriteComment,children:\"\\uB4F1\\uB85D\"})]})})]})]})});}export default MyDetailFeedBody;var BodyContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"])));var BodyWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 900px;\\n  margin: auto;\\n  padding: 30px 0;\\n\"])));var TitleContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin-top: 30px;\\n\"])));var ContentContainer=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  margin-top: 50px;\\n\"])));var SubtitleContainer=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin-top: 30px;\\n  text-align: right;\\n\"])));var SubTitle=styled.span(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: inline-block;\\n  padding-left: 20px;\\n\"])));var CommentContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  margin-top: 50px;\\n\"])));var CommentsData=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  padding: 20px 0;\\n  border-bottom: 1px solid rgb(238, 238, 238);\\n\"])));var MainSubTitle=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  border-bottom: 1px solid rgb(238, 238, 238);\\n  padding-bottom: 9px;\\n  margin-bottom: 9px;\\n\"])));var LikesBtn=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  margin-top: 40px;\\n  font-size: 6px;\\n  text-align: right;\\n  cursor: pointer;\\n\"])));var MainContent=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  //   border-bottom: 1px solid rgb(238, 238, 238);\\n  //   padding-bottom: 40px;\\n\"])));var CommentDate=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: #999;\\n  margin: 10px 0;\\n\"])));var CommentUser=styled.span(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  font-size: 16px;\\n\"])));var LikeNumber=styled.span(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  display: inline-block;\\n  margin-left: 5px;\\n\"])));var EditBtn=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-end;\\n\"])));var Edit=styled.button(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\"])));var Delete=styled.button(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\"])));","map":{"version":3,"sources":["/Users/jun/Desktop/Back-Git/개인 프로젝트/SNS-APP/front-end/src/components/bodyComponents/MyDetailFeedBody.js"],"names":["styled","Comment","axios","dayjs","useState","useEffect","Link","useNavigate","useLocation","MyDetailFeedBody","state","page","setPage","title","setTitle","basicUserInfoResponse","userName","writer","setWriter","contents","body","setBody","createdTime","format","date","setDate","commentDate","setCommentDate","id","setId","likes","setLikes","comments","setComments","totalPage","setTotalPage","comment","setComment","navigate","handleLikePost","event","console","log","localStorage","getItem","url","method","headers","Authorization","then","res","handleLikeCounts","catch","error","data","responseBody","favoriteNumber","changePage","pageNum","handleGetComments","boardGetResponse","totalPages","handleWriteComment","content","handleModify","handleDelete","map","userInfo","commentInfo","updateDate","v","target","value","BodyContainer","div","BodyWrapper","TitleContainer","ContentContainer","SubtitleContainer","SubTitle","span","CommentContainer","CommentsData","MainSubTitle","LikesBtn","MainContent","CommentDate","CommentUser","LikeNumber","EditBtn","Edit","button","Delete"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport Comment from \"../comment/Comment\";\nimport axios from \"axios\";\nimport dayjs from \"dayjs\";\n\nimport { useState, useEffect } from \"react\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\n\nfunction MyDetailFeedBody() {\n  const { state } = useLocation();\n  const [page, setPage] = useState(0);\n  const [title, setTitle] = useState(state.title);\n  const [writer, setWriter] = useState(state.basicUserInfoResponse.userName);\n  const [body, setBody] = useState(state.contents);\n  const [date, setDate] = useState(dayjs(state.createdTime).format(\"YYYY-MM-DD HH:mm\"));\n  const [commentDate, setCommentDate] = useState();\n\n  const [id, setId] = useState(state.id);\n\n  const [likes, setLikes] = useState(0);\n  const [comments, setComments] = useState([]);\n  const [totalPage, setTotalPage] = useState(0);\n  const [comment, setComment] = useState();\n  const navigate = useNavigate();\n\n  const handleLikePost = (event) => {\n    console.log(localStorage.getItem(\"token\"));\n    axios({\n      url: \"/api/v1/favorite/board/\" + id,\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => {\n        console.log(\"success\");\n        handleLikeCounts();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleLikeCounts = (event) => {\n    console.log(localStorage.getItem(\"token\"));\n    axios({\n      url: \"/api/v1/favorite/board/\" + id,\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => {\n        console.log(\"success favorite\");\n        setLikes(res.data.responseBody.favoriteNumber);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const changePage = (pageNum) => {\n    console.log(\"change pages\");\n    console.log(pageNum);\n    console.log(page);\n    setPage(pageNum);\n    handleGetComments(pageNum);\n  };\n\n  const handleGetComments = (pageNum, event) => {\n    console.log(\"handleGetComments\");\n    axios({\n      // url: '/api/v1/board/' + id + '/comments?size=5&sort=id&page=' + pageNum,\n      url: \"/api/v1/user/board/\" + id + \"/comment\",\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => {\n        console.log(\"success comment\");\n        console.log(res);\n        setComments(res.data.responseBody);\n        setCommentDate(res.data.createdTime);\n        setTotalPage(res.data.boardGetResponse.totalPages);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleWriteComment = (pageNum, event) => {\n    console.log(\"handleWriteComment\");\n    axios({\n      url: \"/api/v1/user/board/\" + id + \"/comment\",\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n      data: {\n        content: comment,\n      },\n    })\n      .then((res) => {\n        console.log(\"success\");\n        handleGetComments();\n        setComment(\"\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleModify = () => {\n    console.log(\"handleModify\");\n    console.log(state);\n    navigate(\"/edit/my/feed\", { state: state });\n  };\n\n  const handleDelete = (id) => {\n    console.log(\"handleDelete \" + id);\n    axios({\n      url: \"/api/v1/board/\" + id,\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    })\n      .then((res) => {\n        console.log(\"success\");\n        console.log(res);\n        console.log(page);\n        navigate(\"/my/feed\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    handleGetComments();\n    handleLikeCounts();\n  }, []);\n\n  return (\n    <BodyContainer>\n      <BodyWrapper>\n        <MainContent>\n          <MainSubTitle>나의 게시글 보기</MainSubTitle>\n          <TitleContainer>\n            <h3> {title}</h3>\n            <SubtitleContainer>\n              <SubTitle> {writer}</SubTitle>\n              <SubTitle>{date}</SubTitle>\n            </SubtitleContainer>\n          </TitleContainer>\n          <ContentContainer>{body}</ContentContainer>\n          <LikesBtn onClick={handleLikePost}>\n            <p className=\"bi bi-hand-thumbs-up fs-6\">\n              <LikeNumber>{likes}</LikeNumber>\n            </p>\n          </LikesBtn>\n        </MainContent>\n        <EditBtn>\n          <Edit type=\"button\" className=\"btn btn-primary px-3  btn-sm me-md-2\" onClick={handleModify}>\n            수정\n          </Edit>\n          <Delete type=\"button\" className=\"btn btn-outline-danger btn-sm px-3\" onClick={() => handleDelete(id)}>\n            삭제\n          </Delete>\n        </EditBtn>\n\n        <CommentContainer>\n          <MainSubTitle>댓글</MainSubTitle>\n\n          {comments.map((comment) => (\n            <CommentsData>\n              <span>\n                <i class=\"bi bi-person-circle\"></i>\n              </span>\n              <CommentUser> {comment.userInfo.userName}</CommentUser>\n              <div> {comment.commentInfo.content}</div>\n              <CommentDate>{dayjs(comment.commentInfo.updateDate).format(\"YYYY.MM.DD HH:mm\")}</CommentDate>\n            </CommentsData>\n          ))}\n\n          <CommentContainer>\n            <form className=\"form-group  mb-2 row\">\n              <div className=\"form-group col\">\n                <textarea value={comment} className=\"form-control\" id=\"inputPassword2\" placeholder=\"댓글 추가\" onChange={(v) => setComment(v.target.value)}></textarea>\n              </div>\n              <button type=\"button\" className=\"btn btn-primary col-1\" onClick={handleWriteComment}>\n                등록\n              </button>\n            </form>\n          </CommentContainer>\n        </CommentContainer>\n      </BodyWrapper>\n    </BodyContainer>\n  );\n}\n\nexport default MyDetailFeedBody;\n\nconst BodyContainer = styled.div`\n  width: 100%;\n`;\n\nconst BodyWrapper = styled.div`\n  width: 900px;\n  margin: auto;\n  padding: 30px 0;\n`;\n\nconst TitleContainer = styled.div`\n  margin-top: 30px;\n`;\n\nconst ContentContainer = styled.div`\n  margin-top: 50px;\n`;\n\nconst SubtitleContainer = styled.div`\n  margin-top: 30px;\n  text-align: right;\n`;\n\nconst SubTitle = styled.span`\n  display: inline-block;\n  padding-left: 20px;\n`;\n\nconst CommentContainer = styled.div`\n  margin-top: 50px;\n`;\n\nconst CommentsData = styled.div`\n  padding: 20px 0;\n  border-bottom: 1px solid rgb(238, 238, 238);\n`;\n\nconst MainSubTitle = styled.div`\n  font-size: 12px;\n  border-bottom: 1px solid rgb(238, 238, 238);\n  padding-bottom: 9px;\n  margin-bottom: 9px;\n`;\n\nconst LikesBtn = styled.div`\n  margin-top: 40px;\n  font-size: 6px;\n  text-align: right;\n  cursor: pointer;\n`;\n\nconst MainContent = styled.div`\n  //   border-bottom: 1px solid rgb(238, 238, 238);\n  //   padding-bottom: 40px;\n`;\n\nconst CommentDate = styled.div`\n  font-size: 12px;\n  color: #999;\n  margin: 10px 0;\n`;\nconst CommentUser = styled.span`\n  font-size: 16px;\n`;\n\nconst LikeNumber = styled.span`\n  display: inline-block;\n  margin-left: 5px;\n`;\n\nconst EditBtn = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst Edit = styled.button``;\n\nconst Delete = styled.button``;\n"]},"metadata":{},"sourceType":"module"}